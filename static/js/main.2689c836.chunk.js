(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2OyYS","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__3yIVL"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2JbMd",Modal:"Modal_Modal__2ySy0"}},14:function(e,t,a){e.exports={App:"App_App__Z_tDU"}},15:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2w7th"}},16:function(e,t,a){e.exports={Text:"ImageGalleryView_Text__xMIbT"}},17:function(e,t,a){e.exports={Button:"Button_Button__3R7Kb"}},19:function(e,t,a){e.exports={LoadeMore:"Loader_LoadeMore__1ybtF"}},26:function(e,t,a){},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__1QmV6",SearchForm:"Searchbar_SearchForm__2j0TM","SearchForm-button":"Searchbar_SearchForm-button__1yDve","SearchForm-button-label":"Searchbar_SearchForm-button-label__2iAt5","SearchForm-input":"Searchbar_SearchForm-input__UeJ1G"}},48:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(6),o=a.n(c),s=(a(26),a(3)),i=a(14),u=a.n(i),l=a(4),m=a.n(l),h=a(0);var b=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(h.jsx)("header",{className:m.a.Searchbar,children:Object(h.jsxs)("form",{className:m.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):alert("ENTER NAME")},children:[Object(h.jsx)("button",{type:"submit",className:m.a["SearchForm-button"],children:Object(h.jsx)("span",{className:m.a["SearchForm-button-label"],children:"Search"})}),Object(h.jsx)("input",{className:m.a["SearchForm-input"],type:"text",value:c,onChange:function(e){o(e.target.value.toLowerCase())},autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})},j=a(13),g=a(11),d=a.n(g);var f=function(e){var t=e.src,a=e.alt,n=e.activeImage;return Object(h.jsx)("li",{className:d.a.ImageGalleryItem,children:Object(h.jsx)("img",{src:t,alt:a,className:d.a["ImageGalleryItem-image"],onClick:n})})},p=a(15),O=a.n(p);var y=function(e){var t=e.images,a=e.activeImage;return Object(h.jsx)("ul",{className:O.a.ImageGallery,children:t.map((function(e){return Object(h.jsx)(f,{src:e.webformatURL,alt:e.tags,activeImage:function(){return a(e.largeImageURL,e.tags)}},e.id)}))})},v=a(16),_=a.n(v),x=a(17),S=a.n(x);var I=function(e){var t=e.onLoadMore;return Object(h.jsx)("button",{type:"button",className:S.a.Button,onClick:t,children:"Load more"})},w=a(8),k=a(9),P=a(21),F=a(20),M=a(18),N=a.n(M),G=a(19),L=a.n(G),E=function(e){Object(P.a)(a,e);var t=Object(F.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){return Object(h.jsx)(N.a,{className:L.a.LoadeMore,type:"Puff",color:"#00BFFF",height:300,width:300,timeout:3e3})}}]),a}(n.Component);var C=new(function(){function e(){Object(w.a)(this,e),this.searchQuery="",this.currentPage=1,this.perPage=12}return Object(k.a)(e,[{key:"getImage",value:function(){var e=this;return fetch("".concat("https://pixabay.com/api/?","q=").concat(this.searchQuery,"&page=").concat(this.currentPage,"&key=").concat("21900580-a9d3faca1e1a077fd5c5f4e0a","&image_type=photo&orientation=horizontal&per_page=").concat(this.perPage)).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0441 \u0438\u043c\u0435\u043d\u0435\u043c ".concat(e.query)))}))}},{key:"resetPage",value:function(){this.currentPage=1}},{key:"incrementPage",value:function(){this.currentPage+=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"imagesPerPage",get:function(){return this.perPage}}]),e}()),T="idle",A="pending",B="resolved",q="rejected";var Q=function(e){var t=e.controlModal,a=e.nameImage,r=Object(n.useState)(null),c=Object(s.a)(r,2),o=c[0],i=c[1],u=Object(n.useState)(null),l=Object(s.a)(u,2),m=l[0],b=l[1],g=Object(n.useState)(T),d=Object(s.a)(g,2),f=d[0],p=d[1];return Object(n.useEffect)((function(){""!==a&&(p(A),C.query=a,C.resetPage(),C.getImage().then((function(e){var t=e.hits;i(t),p(B)})).catch((function(e){b(e),p(q)})))}),[a]),"idle"===f?Object(h.jsx)("p",{className:_.a.Text,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438/\u0444\u043e\u0442\u043e"}):"pending"===f?Object(h.jsx)(E,{}):"rejected"===f?Object(h.jsx)("p",{children:m.message}):"resolved"===f?o.length<C.imagesPerPage?Object(h.jsx)(y,{images:o}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(y,{images:o,activeImage:function(e,a){t(e,a)}}),Object(h.jsx)(I,{onLoadMore:function(){C.incrementPage(),C.getImage().then((function(e){var t=e.hits;i((function(e){return[].concat(Object(j.a)(e),Object(j.a)(t))})),p(B),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){b(e),p(q)}))}})]}):void 0},J=a(12),R=a.n(J),U=document.querySelector("#modal-root");var D=function(e){var t=e.onClose,a=e.src,r=e.alt,o=function e(a){"Escape"===a.code&&(t(),window.removeEventListener("keydown",e))};return Object(n.useEffect)((function(){console.log("\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 useEffect \u043c\u043e\u0434\u0430\u043b\u043a\u0438"),window.addEventListener("keydown",o)})),Object(c.createPortal)(Object(h.jsx)("div",{className:R.a.Overlay,onClick:function(e){e.currentTarget===e.target&&(t(),window.removeEventListener("keydown",o))},children:Object(h.jsx)("div",{className:R.a.Modal,children:Object(h.jsx)("img",{src:a,alt:r})})}),U)};var V=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(s.a)(c,2),i=o[0],l=o[1];return Object(h.jsxs)("div",{className:u.a.App,children:[Object(h.jsx)(b,{onSubmit:function(e){r(e)}}),Object(h.jsx)(Q,{nameImage:a,controlModal:function(e,t){l({src:e,alt:t})}}),i&&Object(h.jsx)(D,{onClose:function(){l(null)},src:i.src,alt:i.alt})]})};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(V,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.2689c836.chunk.js.map